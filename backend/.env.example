# =====================================================================
# openGecko 开发环境配置模板
# 复制为 backend/.env：  cp backend/.env.example backend/.env
# 生产环境请参考 backend/.env.prod.example
# =====================================================================

# ─────────────────────────────────────────────────────────────────────
# 数据库
# ─────────────────────────────────────────────────────────────────────
# 开发默认 SQLite；生产建议换为 PostgreSQL（见 .env.prod.example）
# 路径对应 docker-compose.yml 中 ./data:/app/data 卷，确保数据持久化
DATABASE_URL=sqlite:///./data/opengecko.db

# 连接池（PostgreSQL / MySQL 时生效）
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_TIMEOUT=30
# DB_POOL_RECYCLE=3600
# DB_ECHO=false

# ─────────────────────────────────────────────────────────────────────
# 安全
# ─────────────────────────────────────────────────────────────────────
# ⚠️  生产环境必须替换为强随机密钥：openssl rand -hex 32
JWT_SECRET_KEY=dev-secret-key-change-in-production
ACCESS_TOKEN_EXPIRE_MINUTES=480

# ─────────────────────────────────────────────────────────────────────
# CORS（生产环境必填，多个域名用逗号分隔）
# ─────────────────────────────────────────────────────────────────────
# CORS_ORIGINS=https://your-domain.com
# 开发环境默认值: http://localhost:3000,http://127.0.0.1:3000

# ─────────────────────────────────────────────────────────────────────
# 速率限制
# ─────────────────────────────────────────────────────────────────────
# RATE_LIMIT_LOGIN=10/minute
# RATE_LIMIT_DEFAULT=120/minute

# ─────────────────────────────────────────────────────────────────────
# 初始管理员 [仅首次启动时使用]
# ─────────────────────────────────────────────────────────────────────
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_EMAIL=admin@example.com

# ─────────────────────────────────────────────────────────────────────
# 时区配置
# ─────────────────────────────────────────────────────────────────────
# 服务端使用的时区，影响 ICS 日历文件和邮件通知中的时间显示
# 数据库始终以 UTC 存储；此配置仅控制服务端生成内容的本地化时区
# 可用值参见 IANA 时区数据库: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
APP_TIMEZONE=Asia/Shanghai

# ─────────────────────────────────────────────────────────────────────
# 服务器
# ─────────────────────────────────────────────────────────────────────
HOST=0.0.0.0
PORT=8000
DEBUG=true
LOG_LEVEL=info
# LOG_FORMAT=json   # 生产环境建议启用 JSON 格式日志

# ─────────────────────────────────────────────────────────────────────
# 文件存储
# ─────────────────────────────────────────────────────────────────────
# 开发环境默认使用本地文件系统；Docker 部署时默认使用 MinIO（s3）
# STORAGE_BACKEND=local    # local | s3

# S3 / MinIO（仅 STORAGE_BACKEND=s3 时需要填写）
# S3_ENDPOINT_URL=http://minio:9000
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin
# S3_BUCKET=opengecko
# S3_PUBLIC_URL=http://minio:9000/opengecko

# 上传文件大小上限（字节）
# MAX_UPLOAD_SIZE=52428800  # 50MB

# ─────────────────────────────────────────────────────────────────────
# 可选功能模块
# ─────────────────────────────────────────────────────────────────────
# 设为 false 则禁用「洞察与人脉」模块（人脉管理 + 生态洞察），前端自动隐藏对应菜单
# ENABLE_INSIGHTS_MODULE=true

# ─────────────────────────────────────────────────────────────────────
# 生态洞察采集服务
# ─────────────────────────────────────────────────────────────────────
# GitHub Personal Access Token，不填则受 60 req/h 匿名限速
# GITHUB_TOKEN=ghp_xxxx
# Gitee 私人令牌（可选）
# GITEE_TOKEN=
# 全局默认采集间隔（小时），各项目可单独覆盖
# COLLECTOR_SYNC_INTERVAL_HOURS=24
# 并发采集线程数
# COLLECTOR_MAX_WORKERS=4
# 独立采集器主循环检查间隔（秒）
# COLLECTOR_CHECK_INTERVAL_SECONDS=3600
# true = 嵌入 FastAPI 进程（默认）；false = 外部 run_collector.py 独立进程
# COLLECTOR_EMBEDDED=true

# ─────────────────────────────────────────────────────────────────────
# SMTP（可选，用于密码重置）
# ─────────────────────────────────────────────────────────────────────
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-email-password
# SMTP_FROM_EMAIL=noreply@example.com
# SMTP_USE_TLS=true
